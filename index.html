<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>React Workshop</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<link rel="stylesheet" href="css/app.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
              <section data-markdown>
                <script type="text/template">
                  # React Workshop
                  ## Dev Meetings
                  ### Justin McCandless
                </script>
              </section>
              <section data-markdown>
                <script type="text/template">
                  ## Hi I'm Justin
                  <ul>
                    <li class="fragment">Engineer with Autodesk's BioNano group</li>
                    <li class="fragment"><3 React since 2015</li>
                    <li class="fragment">@justinjmcc | justinmccandless.com</li>
                  </ul>
                </script>
              </section>
              <section data-markdown>
                <script type="text/template">
                  ## Outline for the day
                  - What is React?
                  - Sprint 0: Creating a static app
                  - Sprint 1: Dynamic state and props
                  - Sprint 2: Forms and mutating state
                  - Sprint 3: Component lifecycle and complex interactions
                  - Sprint 4: Asynchronous data (integrating an API)
                  - Advanced topics and how to keep learning
                </script>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## What is React?
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## Roots: Static HTML
                    ![HTML5 Boilerplate](./img/html.png)
                    <br />
                    Source: [https://html5boilerplate.com/](https://html5boilerplate.com/)
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## Roots: Direct DOM Manipulation
                    Source: [http://codepen.io/justinmc/pen/oBRKeG](http://codepen.io/justinmc/pen/oBRKeG)
                    ```javascript
                    <button class="adder">+1</button>
  <div class="count">0</div>
                    ```
                    ```javascript
                    var adderEl = document.querySelector('.adder');
                    var countEl = document.querySelector('.count');

                    adderEl.addEventListener('click', function() {
                      var currentValue = countEl.innerHTML;
                      countEl.innerHTML = parseInt(currentValue) + 1;
                    });
                    ```
                    ![Direct DOM Manipulation Example](./img/increment.gif)
                    <aside class="notes">
                      I was originally going to call this slide "jQuery Spaghetti".  This is great for simple interactivity, but is hard to maintain in large applications.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## Roots: MVC
                    ![MVC Diagram](./img/MVC-basic.svg)
                    <aside class="notes">
                      Keep state in javascript, mutate state, and rerender. Backbone is a great example.  Potential performance problems with totally rerendering too much.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## Enter React
                    <ol>
                      <li class="fragment">Render HTML based on data.</li>
                      <li class="fragment">Do subsequent renders incredibly quickly.</li>
                      <li class="fragment">That's pretty much it.</li>
                    </ol>
                    <aside class="notes">
                      Very minimal.  Not a full MVC setup.  Plays well with others.  Solves the performance problem of rerendering too much.
                    </aside>
                  </script>
                </section>
                <section data-markdown data-transition="none">
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## React: Data => HTML
                    ```javascript
                    function MyReactComponent() {
                      const myButtonLabel = 'Click Me!';
                      const myButtonIsDisabled = false;

                      return (
                        <button
                          className="pretty-button"
                          disabled={myButtonIsDisabled}
                        >
                          {myButtonLabel}
                        </button>
                      );
                    }
                    ```
                    ![React Button Component Enabled](./img/button_component_enabled.png)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown data-transition="none">
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## React: Data => HTML
                    ```javascript
                    function MyReactComponent() {
                      const myButtonLabel = 'Don\'t Click Me :(';
                      const myButtonIsDisabled = true;

                      return (
                        <button
                          className="pretty-button"
                          disabled={myButtonIsDisabled}
                        >
                          {myButtonLabel}
                        </button>
                      );
                    }
                    ```
                    ![React Button Component Enabled](./img/button_component_disabled.png)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## Wait but how are you writing HTML in your JS?
                    <ul>
                      <li class="fragment">It's called JSX!</li>
                      <li class="fragment">It's a preprocessing language that gets compiled to plain old javascript.</li>
                    </ul>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## JSX
                    ```javascript
                      return (
                        <p className="prose">Lorem Ipsum</p>
                      );
                    ```
                    =>
                    ```javascript
                    return React.createElement(
                      "p",
                      { className: "prose" },
                      "Lorem Ipsum"
                    );
                    ```
                    If you want to play around with compiling to JSX, try [Babel's repl](https://babeljs.io/repl) (don't forget to turn on the "react" preset).
                    <aside class="notes">
                      Very similar to document.createElement!  We're going to use jsx in this workshop because it is very prevalent.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## You said React was fast?
                    <ul>
                      <li class="fragment">React isn't just reinserting a whole new element each time something changes.</li>
                      <li class="fragment">It's doing DOM DIFFING!</li>
                      <li class="fragment">On a rerender, compares the current state of the DOM to the new state, then makes minimum number of operations needed to transition to the new state.</li>
                    </ul>
                    <aside class="notes">
                      From what we've seen so far, you could imagine writing a library to insert these components into the dom yourself in a few hundred lines.  There are some libraries that do this!  Actually not bad performance in most cases.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Introduction: What is React?</div>
                    ## One more performance buzz word for you
                    <ul>
                      <li class="fragment">React doesn't actually look at the actual DOM to make it's comparison.  It looks at the VIRTUAL DOM.</li>
                      <li class="fragment">The virtual DOM is React's own internal representation of the DOM designed to be super quick to inspect and make operations on.</li>
                      <li class="fragment">Why does React go through all this trouble to avoid working with the DOM?  Because the DOM is a slow legacy dinosaur.</li>
                    </ul>
                    <aside class="notes">
                      Not to be confused with the Shadow DOM.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## Ok you guys pretty much know React now, let's build something.
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## Tips!
                    - Whenever you finish a task, commit!
                      - That way, if we have to move on while you're still working, you can stash and get back to a working state.
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## [The Sprints](#/3)
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## [Sprint 0](https://github.com/justinmc/react-workshop-app/tree/sprint0)
                    1. <span class="task-basic">Generate a React app with [create-react-app](https://github.com/facebookincubator/create-react-app).</span>
                    1. <span class="task-basic">Initialize a git repository.
                    1. <span class="task-basic">Edit the big title on the page and see it update in your browser.</span>
                    1. <span class="task-basic">Create your own "Post" React component and render it.</span>
                    1. <span class="task-basic">Make it awesome with CSS and hardcoded info.</span>
                    1. <span class="task-advanced">Install a linter like the [airbnb eslint config](https://www.npmjs.com/package/eslint-config-airbnb) and make your jsx code comply!</span>
                    1. <span class="task-extra">Install [redux](http://redux.js.org/), create a Container above your "Post" component, and feed it dummy data.</span>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## create-react-app
                    - We're using it because it's easy and very widely used.
                    - It will be compiling our jsx, es7, and serving the compiled static assets.
                    - You can do fancier things with tools like Webpack and your own setup, though, so check those out if you end up with more build requirements.
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Default App.js component
                    ```javascript
                    import React, { Component } from 'react';
                    import logo from './logo.svg';
                    import './App.css';

                    class App extends Component {
                      render() {
                        return (
                          <div className="App">
                            <div className="App-header">
                              <img src={logo} className="App-logo" alt="logo" />
                              <h2>Welcome to React</h2>
                            </div>
                            <p className="App-intro">
                              To get started, edit <code>src/App.js</code> and save to reload.
                            </p>
                          </div>
                        );
                      }
                    }

                    export default App;
                    ```
                    <aside class="notes">
                      Note that we're using a class here instead of a function.  Both are ok!
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Default App.js component
                    ![Rendering of default component](./img/default_component.png)
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Customize it
                    ```
                    <div className="App-header">
                      <img src={logo} className="App-logo" alt="logo" />
                      <h2>Welcome to Justin's Awesome App!</h2>
                    </div>
                    ```
                    ![Rendering of customized component](./img/default_component_customized.png)
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Customized it
                    ```
                    return (
                      <div className="App">
                        <div
                          className="app-bar"
                        >
                          <div>Story Time</div>
                        </div>
                        <h2>Your Books</h2>
                        <ul>
                          <li>Treasure Island by Robert Louis Stevenson</li>
                          <li>Go Dog Go by Dr. Seuss</li>
                        </ul>
                      </div>
                    );
                    ```
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Customized it
                    ![Rendering of fully customized component](./img/default_component_fully_customized.png)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Components in Components
                    ```
                    <ul>
                      <li>Treasure Island by Robert Louis Stevenson</li>
                    </ul>
                    ```
                    <div class="fragment">
                      ```
                      <ul>
                        <Book />
                      </ul>
                      ```
                    </div>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Components in Components
                    `components/Book.js`
                    ```
                    import React, { Component } from 'react';

                    class Book extends Component {
                      render() {
                        return (
                          <li>Treasure Island by Robert Louis Stevenson</li>
                        );
                      }
                    }

                    export default Book;
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Components in Components
                    Back in `App.js`
                    ```
                    import React, { Component } from 'react';
                    import Book from './components/Book';
                    import './css/App.css';
                    ```
                    ...
                      ```
                      <ul>
                        <Book />
                        <Book />
                        <Book />
                      </ul>
                      ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 0</div>
                    ## Questions before we [get started](#/3)?
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## [Sprint 1](https://github.com/justinmc/react-workshop-app/tree/sprint1)
                    1. <span class="task-basic">Feed your nested components data via props.</span>
                    1. <span class="task-basic">Add some local dynamic interactions with state.</span>
                    1. <span class="task-advanced">Build some generic UI components for your app like a `<Button />`.</span>
                    1. <span class="task-extra">When the user performs an action like the one controlled by state in this sprint, call an action, dispatch an event, and modify state via a reducer.</span>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Props and State
                    - Props is an object containing all data passed in to the component.
                    - State is an object representing all state internal to the component.
                    - Anytime either one changes, the component will rerender.
                    <aside class="notes">
                      Component will kick off its whole process of DOM diffing and modifying the DOM if necessary.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Passing Props to the Book Component
                    `App.js`
                    ```javascript
                    <ul>
                      <Book
                        title="Treasure Island"
                        author="Robert Louis Stevenson"
                      />
                      <Book
                        title="Go Dog Go"
                        author="Dr. Seuss"
                      />
                    </ul>
                    ```
                    <aside class="notes">
                      You can pass any javascript primitives or variables as props!
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Passing Props to the Book Component
                    `Book.js`
                    ```javascript
                    class Book extends Component {
                      render() {
                        return (
                          <li
                            className="book"
                          >
                            <div>
                              {this.props.title}
                            </div>
                            <div>
                              {`by ${this.props.author}`}
                            </div>
                          </li>
                        );
                      }
                    }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Prop Types and Default Props
                    You can tell React what types to expect for each prop value, whether or not they're required, and what value to use as a default if not.  There is a nice [list of all available prop types](https://facebook.github.io/react/docs/typechecking-with-proptypes.html) in the React docs.
                    ```javascript
                    static defaultProps = {}

                    static propTypes = {
                      title: React.PropTypes.string.isRequired,
                      author: React.PropTypes.string.isRequired,
                    }
                    ```
                    <aside class="notes">
                      This syntax is equivalent to `Book.defaultProps = {};` etc.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## State
                    I'll add a "favorite" indicator on books that I want to work something like this:
                    <br />
                    ![State UI](./img/state.gif)
                    <div class="section">Sprint 1</div>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## State
                    `Book.js` and `Book.css`
                    ```javascript
                    <div>
                      <span className="favorite" />
                      {this.props.title}
                    </div>
                    ```
                    ```css
                    .favorite {
                      display: inline-block;
                      background-color: #dfdfdf;
                      height: 16px;
                      width: 16px;
                      border-radius: 8px;
                      margin: 6px;
                    }
                    .favorite.enabled {
                      background-color: tomato;
                    }
                    ```
                    <aside class="notes">
                      If I add the "enabled" class to the span, it will show filled red.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## State
                    `Book.js`
                    ```javascript
                    const favoriteClass = this.state.favorited ? 'enabled' : '';

                    return (
                      <li
                        className="book"
                      >
                        <div>
                          <span className={`favorite ${favoriteClass}`} />
                          {this.props.title}
                        </div>
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Initial State
                    `Book.js`
                    ```javascript
                    constructor(props) {
                      super(props);

                      this.state = {
                        favorited: false,
                      };
                    }
                    ```
                    <aside class="notes">
                      If you're not using es6 classes, you can use getInitialState.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Make it Dynamic
                    `Book.js`
                    ```javascript
                    onClickFavorite = () => {
                      this.setState({
                        favorited: !this.state.favorited,
                      });
                    }
                    ```
                    ```
                    <span
                      className={`favorite ${favoriteClass}`}
                      onClick={this.onClickFavorite}
                    />
                    ```
                    <aside class="notes">
                      This is es7 class property declaration syntax.  Otherwise, `onClickFavorite() {` and `this.onClickFavorite = this.onClickFavorite.bind(this)` in constructor.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## State All Done
                    `Book.js`
                    ```
                    import React, { Component } from 'react';
                    import '../css/Book.css';

                    class Book extends Component {
                      static propTypes = {
                        title: React.PropTypes.string.isRequired,
                        author: React.PropTypes.string.isRequired,
                      }

                      constructor(props) {
                        super(props);

                        this.state = {
                          favorited: false,
                        };
                      }

                      onClickFavorite = () => {
                        this.setState({
                          favorited: !this.state.favorited,
                        });
                      }

                      render() {
                        const favoriteClass = this.state.favorited ? 'enabled' : '';

                        return (
                          <li
                            className="book"
                          >
                            <div>
                              <span
                                className={`favorite ${favoriteClass}`}
                                onClick={this.onClickFavorite}
                              />
                              {this.props.title}
                            </div>
                            <div>
                              {`by ${this.props.author}`}
                            </div>
                          </li>
                        );
                      }
                    }

                    export default Book;
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 1</div>
                    ## Questions before we [get started](#/4)?
                    <aside class="notes">
                      Text inputs will come next.
                    </aside>
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## [Sprint 2](https://github.com/justinmc/react-workshop-app/tree/sprint2)
                    1. <span class="task-basic">Render an array of data by looping over it.</span>
                    1. <span class="task-basic">Build a controlled text input with state.</span>
                    1. <span class="task-advanced">Add validation to your form input.</span>
                    1. <span class="task-advanced">Add a few different types of form elements (radio buttons, checkboxes, dropdowns, etc.) and map their values to state.</span>
                    1. <span class="task-advanced">Try building an uncontrolled input.</span>
                    1. <span class="task-advanced">Play around with [refs](https://facebook.github.io/react/docs/refs-and-the-dom.html) for more direct DOM access.</span>
                    1. <span class="task-extra">Update your Flux/Redux store on form submission.</span>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Looping in JSX
                    - JSX is capable of rendering arrays of elements too!
                    - Just make sure each element has a unique `key` attribute.
                    <div class="fragment">
                      ```javascript
                        <ol>
                          {
                            ['a', 'b', 'c'].map((element) => (
                              <li key={element}>{element}</li>
                            ))
                          }
                        </ol>
                      ```
                    </div>
                    <div class="fragment">
                      ![Render of loop code](./img/list_loop.png)
                    </div>
                    <aside class="notes">
                      React uses the `key` attribute to uniquely identify elements in order to do the most efficient DOM manipulations when your data changes.  If you forget it, React will log a warning.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Books from an array
                    - Get our books into `state` as an array.

                    ```javascript
                      constructor(props) {
                        super(props);

                        this.state = {
                          books: [
                            { title: 'Treasure Island', author: 'Robert Louis Stevenson' },
                            { title: 'Go Dog Go', author: 'Dr. Seuss' },
                          ],
                        };
                      }
                    ```
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## Books from an array
                    - Render a `Book` component for each book in the array.

                    ```
                      <ul>
                        {
                          this.state.books.map(book =>
                            <Book
                              key={book.title}
                              title={book.title}
                              author={book.author}
                            />
                          )
                        }
                      </ul>
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Inputs
                    What does this render? (in a jsx React component)
                    ```javascript
                      <input type="text" value="words go here" />
                    ```
                    <div class="fragment">
                      ![Input with value set to string](./img/input_with_value.png)
                    </div>
                    <aside class="notes">
                      And what happens if the user tries to change the input?  Nothing!  It won't change.  React will rerender it immediately.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Inputs
                    What is the value of `event.target.value`?
                    ```javascript
                      onChangeInput = (event) => {
                        console.log(event.target.value);
                      }

                      ...

                      <input
                        type="text"
                        value="words go here"
                        onChange={this.onChangeInput} />
                    ```
                    <div class="fragment">
                      Answer: The value that the user updated the input to (after first keystroke)
                    </div>
                    <aside class="notes">
                      Note the class property syntax used to avoid needing to `.bind`.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## [Controlled Inputs](https://facebook.github.io/react/docs/forms.html)
                    ```javascript
                      constructor(props) {
                        super(props);

                        this.state = {
                          inputValue: 'words go here',
                        };
                      }

                      onChangeInput = (event) => {
                        this.setState({
                          inputValue: event.target.default,
                        });
                      }

                      ...

                      <input
                        type="text"
                        value={this.state.inputValue}
                        onChange={this.onChangeInput} />
                    ```
                    <div class="fragment">
                      Answer: The value that the user updated the input to (after first keystroke)
                    </div>
                    <aside class="notes">
                      Note the class property syntax used to avoid needing to `.bind`.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## That was a lot of typing...
                    - React is verbose, but for complex apps, the architectural benefits are worth it.
                    - As forms get more complicated it's nice to have input values match variables.
                    - If you're sure you don't need a full controlled input, you can always just grab values from the html element. See [uncontrolled inputs](https://facebook.github.io/react/docs/uncontrolled-components.html) in the docs.
                    <aside class="notes">
                      - React/Flux/Redux do not try to eliminate boilerplate, they show you everything.
                      - More complicated forms might feature: validation, asynchronous submission
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Let's create a form to add new books to the list.
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    ![Add Component Working](./img/add.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    First, we need a way to add books to our `state.books` array in App.js.
                    <div class="fragment">
                      ```javascript
                        onAddBook = (book) => {
                          // Notice I'm not just pushing to this.state.books
                          this.setState({
                            books: this.state.books.concat([book]),
                          });
                        }
                      ```
                    </div>
                    <aside class="notes">
                      You have to notify React when you mutate state. To enforce this, the [immutablejs](https://facebook.github.io/immutable-js/docs) library is popularly used.
                      You might start to see the benefit in declaring your UI based on state so verbosely now.  Very easy to add an item to the books array and have it render updated.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Now let's create a new component that contains an "add book" form and uses this method.
                    ```javascript
                      <Add onAdd={this.onAddBook} />
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Let's write Add.js.
                    ```javascript
                      class Add extends Component {
                        constructor(props) {
                          super(props);

                          this.state = {
                          };
                        }

                        render() {
                          return (
                            <form className="add">
                            </form>
                          );
                        }
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Fill out the form.
                    ```javascript
                      <form className="add" onSubmit={this.onSubmit}>
                        <input
                          type="text"
                          placeholder="Title"
                          value={this.state.title}
                          onChange={this.onChangeTitle}
                        />
                        <input
                          type="text"
                          placeholder="Author"
                          value={this.state.author}
                          onChange={this.onChangeAuthor}
                        />
                        <input
                          type="submit"
                          value="submit"
                        />
                      </form>
                    ```
                    <aside class="notes">
                      The use of a form element with an `onSubmit` just takes advantage of the browser a bit (pressing the Enter key in an input will submit the form).
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Set a prop type for the `onAdd` function we receive, and set the initial state.
                    ```javascript
                      static propTypes = {
                        onAdd: React.PropTypes.func.isRequired,
                      }

                      constructor(props) {
                        super(props);

                        // Initially, the title and author inputs should be empty
                        this.state = {
                          title: '',
                          author: '',
                        };
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    Update the state when form inputs change.
                    ```javascript
                      onChangeTitle = (e) => {
                        this.setState({
                          title: e.target.value,
                        });
                      }

                      onChangeAuthor = (e) => {
                        this.setState({
                          author: e.target.value,
                        });
                      }
                    ```
                    <aside class="notes">
                      Does this look repetetive?  You can totally use `target.name` to write a generic handler for both.  See the [React Form docs](https://facebook.github.io/react/docs/forms.html).
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    And submit it all.
                    ```javascript
                      onSubmit = (e) => {
                        // Prevent the form from trying to refresh the page
                        e.preventDefault();

                        // Call onAdd up above in App.js
                        this.props.onAdd({ title: this.state.title, author: this.state.author });

                        // Clear the inputs back to their defaults
                        this.setState({
                          title: '',
                          author: '',
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Dynamic Books
                    The complete Add.js component:
                    ```javascript
                      import React, { Component } from 'react';

                      class Add extends Component {
                        static propTypes = {
                          onAdd: React.PropTypes.func.isRequired,
                        }

                        constructor(props) {
                          super(props);

                          this.state = {
                            title: '',
                            author: '',
                          };
                        }

                        onChangeTitle = (e) => {
                          this.setState({
                            title: e.target.value,
                          });
                        }

                        onChangeAuthor = (e) => {
                          this.setState({
                            author: e.target.value,
                          });
                        }

                        onSubmit = (e) => {
                          e.preventDefault();
                          this.props.onAdd({ title: this.state.title, author: this.state.author });

                          this.setState({
                            title: '',
                            author: '',
                          });
                        }

                        render() {
                          return (
                            <form className="Add" onSubmit={this.onSubmit}>
                              <input
                                type="text"
                                placeholder="Title"
                                value={this.state.title}
                                onChange={this.onChangeTitle}
                              />
                              <input
                                type="text"
                                placeholder="Author"
                                value={this.state.author}
                                onChange={this.onChangeAuthor}
                              />
                              <input
                                type="submit"
                                value="submit"
                              />
                            </form>
                          );
                        }
                      }

                      export default Add;
                    ```
                    <aside class="notes">
                      We modify the state data, and React updates the UI to reflect that.  Super powerful and simple to understand.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 2</div>
                    ## Questions before we [get started](#/6)?
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## [Sprint 3](https://github.com/justinmc/react-workshop-app/blob/sprint3)
                    1. <span class="task-basic">Tie your app into an API</span>
                    1. <span class="task-basic">Create a loading state for your form</span>
                    1. <span class="task-basic">Create an error state for your form</span>
                    1. <span class="task-advanced">Try calling an API on input change and on submit, possibly using [lifecycle methods](https://facebook.github.io/react/docs/react-component.html)</span>
                    1. <span class="task-extra">Put API calls in actions</span>
                    1. <span class="task-extra">Dispatch events before and after receiving reply</span>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API
                    - What if a user could search for a book and have the details autofilled?
                    ![UI with API integrated](./img/api.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API
                    ![UI with API integrated](./img/api.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Setup
                    <ul>
                      <li class="fragment">I'll be using the [Google Books API](https://developers.google.com/books/docs/v1/using), which is a public API that requires an API key.</li>
                      <li class="fragment">A common pattern is to include a `.env` file not checked in to your repository to contain things like API keys.</li>
                      <li class="fragment">The [dotenv](https://www.npmjs.com/package/dotenv) pacakge is great for this.</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Setup 2
                    <ul>
                      <li class="fragment">I'm going to use the [axios](https://www.npmjs.com/package/axios) package to make my network requests.</li>
                      <li class="fragment">There are plenty of other options for this including native XHR/fetch, and all work fine with React.</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API
                    - Let's start by writing a function to fetch a book from the API

                    ```javascript
                      import axios from 'axios';
                      import querystring from 'querystring';

                      const apiUtils = {
                        /**
                         * Search for a book by title and/or author in the Google Books api
                         * @param {String} title
                         * @param {String} author
                         * @returns {Promise}
                         */
                        findBook(title, author) {
                          const queryTitle = title ? `intitle:${title}` : '';
                          const queryAuthor = author ? `inauthor:${author}` : '';
                          const queryConnector = queryTitle && queryAuthor ? '+' : '';
                          const queryParams = querystring.stringify({
                            key: process.env.REACT_APP_GOOGLE_BOOKS_API_KEY,
                            q: `${queryTitle}${queryConnector}${queryAuthor}`,
                          });

                          return axios.get(
                            `https://www.googleapis.com/books/v1/volumes?${queryParams}`,
                          ).then((res) => {
                            const bookDatas = res.data.items || [];

                            if (!bookDatas.length) {
                              throw new Error('Book not found');
                            }

                            // Let's just take the first result and hope it's ok :)
                            const bookData = bookDatas[0];

                            // Some basic validation
                            if (!bookData.volumeInfo.title) {
                              throw new Error('Invalid title data, try another book.');
                            }
                            if (!bookData.volumeInfo.authors || !bookData.volumeInfo.authors.length) {
                              throw new Error('Invalid author data, try another book.');
                            }

                            // Add description and fill in typed data with fetched data
                            return {
                              title: bookData.volumeInfo.title,
                              // I added a description to the books to show off :)
                              description: bookData.volumeInfo.description,
                              author: bookData.volumeInfo.authors[0],
                            };
                          });
                        },
                      };

                      export default apiUtils;
                    ```
                    <aside class="notes">
                      - Pardon all the Google Books api finagling that's irrelevant to React.
                      - Takes title/author, returns a promise that resolves with a book.  Simple.
                      - axios is promise based, note the then/catch and error throwing.
                      - Why write a separate method in a separate file?  Very compartmentalized, testable logic here.  And I think it's nice to have all network access in one place.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API
                    - Now we'll use `findBook` in our Add.js component

                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        // Look up the book
                        apiUtils.findBook(this.state.title, this.state.author).then((fetchedBook) => {
                          this.props.onAdd(fetchedBook);

                          this.setState({
                            title: '',
                            author: '',
                          });
                        }).catch(console.error.bind(console));
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API
                    - Works!  [Code so far](https://github.com/justinmc/react-workshop-app/commit/9ec119ad3d60f3e26761fdacfebb0123537abd76)
                    ![The app works up to this point](./img/api_naive.gif)
                    <aside class="notes">
					  - Note that we didn't have to modify App.js at all!  Well encapsulated in Add.js.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Edge Cases
                    <ul>
                      <li>Before we #shipit, there are two more states I always handle:</li>
                      <li class="fragment">1. Loading state</li>
                      <li class="fragment">2. Error state</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Loading State
                    - We're going to add a new boolean piece of `state` that tells us if our Add component is currently loading or not.
                    ```javascript
                      this.state = {
                        author: '',
                        title: '',
                        loading: false,
                      };
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Loading State
                    - And we're going to change the UI based on it.
                    - In my lazy case, we'll just disable the Add form inputs.
                    ```javascript
                      disabled={this.state.loading}
                    ```
                    ![Disabled inputs](./img/disabled_inputs.png)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Loading State
                    - We want our UI to be disabled when loading and always be enabled otherwise.
                    - Where do we need to modify the loading state?

                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        // Look up the book
                        apiUtils.findBook(this.state.title, this.state.author).then((fetchedBook) => {
                          this.props.onAdd(fetchedBook);

                          this.setState({
                            title: '',
                            author: '',
                          });
                        }).catch(console.error.bind(console));
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Loading State
                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        // Turn on loading before we make the call
                        this.setState({
                          loading: true,
                        });

                        apiUtils.findBook(this.state.title, this.state.author).then((fetchedBook) => {
                          this.props.onAdd(fetchedBook);

                          // Turn off loading when the call finishes successfully
                          this.setState({
                            title: '',
                            author: '',
                            loading: false,
                          });
                        }).catch(() => {
                          // Also turn off loading when the call fails
                          this.setState({
                            loading: false,
                          });
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Loading State
                    - [Code up to loading state working](https://github.com/justinmc/react-workshop-app/commit/9ec119ad3d60f3e26761fdacfebb0123537abd76)
                    ![Loading state](./img/api_loading.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Error State
                    - Now let's add a string to hold any current error message.
                    ```javascript
                      this.state = {
                        author: '',
                        title: '',
                        loading: false,
                        error: '', // Empty string means no error
                      };
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Error State
                    - We'll also add a div to hold the error message
                    ```javascript
                      <div className="error">
                        {this.state.error}
                      </div>
                    ```
                    ![Error message](./img/error_message.png)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Error State
                    - We want to give the user a good idea whether their input is valid or not.
                    - Where should we set the error message?

                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        // Look up the book
                        apiUtils.findBook(this.state.title, this.state.author).then((fetchedBook) => {
                          this.props.onAdd(fetchedBook);

                          this.setState({
                            title: '',
                            author: '',
                          });
                        }).catch(console.error.bind(console));
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Error State
                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        this.setState({
                          loading: true,
                          error: '', // Hide the error message during loading
                        });

                        apiUtils.findBook(this.state.title, this.state.author).then((fetchedBook) => {
                          this.props.onAdd(fetchedBook);

                          this.setState({
                            title: '',
                            author: '',
                            loading: false,
                            // We actually shouldn't need to clear error here!
                          });
                        }).catch((error) => {
                          this.setState({
                            loading: false,
                            error: error.message, // Show the error message on error
                          });
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Using an API - Error State
                    - [Full sprint3 API code](https://github.com/justinmc/react-workshop-app/tree/sprint3)
                    ![Full api flow](./img/api.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Async Tasks React Review
                    - Many of you have probably implemented a flow like this plenty of times before.
                    - How does it feel to do it in React?
                    - React can be verbose, but you should be confident that there are no edge cases that the app will get in that you haven't considered.
                    <aside class="notes">
                      - As opposed to directly changing the UI when the user does something, or opposed to bi-directional data binding.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 3</div>
                    ## Questions before we [get started](#/7)?
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## [Sprint 4](https://github.com/justinmc/react-workshop-app/tree/sprint4)
                    1. <span class="task-basic">Introduce a tight performance requirement</span>
                    1. <span class="task-basic">Add multiple components that used the same state with derived data</span>
                    1. <span class="task-advanced">Use immutable data to increase performance and reliability</span>
                    1. <span class="task-advanced">Use Flux/Redux to keep store data and mutations totally independent</span>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    <blockquote cite="https://www.goodreads.com/quotes/497572-true-wisdom-is-knowing-what-you-don-t-know">
                    "True wisdom is knowing what you don't know"
                    </blockquote>
					\- Confucius
                    <aside class="notes">
                    By now you know how to use React, but as you build more complicated real projects, you'll find that there's a lot more knowledge to learn.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Where React Will Get Difficult
                    - Performance - where it's fast and slow
                    - Architecture - Smart and dumb components
                    - Architecture - Complicated derived data
                    - When you shouldn't use React at all
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance
                    - Let's make our list of books super long
                    ```javascript
                      constructor(props) {
                        super(props);

                        const books = [];
                        for (let i = 0; i < 1000; i += 1) {
                          const randomString = Math.round(Math.random() * 10e10).toString(36);
                          books.push({
                            title: randomString,
                            description: 'Indescribable',
                            author: 'Person Who Writes Many Books',
                          });
                        }
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance
                    <img src="./img/book_list_long.png" alt="Long list of books" width="400px" />
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance
                    - And let's disable the api call for now (so that network doesn't factor into the performance cost).
                    ```javascript
                      onSubmit = (e) => {
                        e.preventDefault();

                        this.props.onAdd({
                          title: this.state.title,
                          author: this.state.author,
                          description: '',
                        });

                        this.setState({
                          title: '',
                          author: '',
                          loading: false,
                          error: '',
                        });
                      }
                    ```
                    <aside class="notes">
                      Notice we've removed all of our API code here.  Just add the given book.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance
                    - First let's try naively adding a book to the existing array.
                    ```javascript
                      onAddBook = (book) => {
                        const books = this.state.books;
                        books.push(book);
                        this.setState({
                          books,
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## [Performance](https://github.com/justinmc/react-workshop-app/commit/278a74f022005f2a0422ae038cd20f65e60fcf9e)
                    - Now let's profile how it takes to modify our book list.
                    ![Screen capture of adding new books](./img/perf_add_mutable.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance - Rerenders
                    <ul>
                      <li class="fragment">From the user side, we pushed an element to our array and told React we modified `state`.</li>
                      <li class="fragment">What did React do then?</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance - Rerenders
                    <ul>
                      <li class="fragment">Deeply compared existing state with new state (note, this can be overridden with the [shouldComponentUpdate](https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate) method)</li>
                      <li class="fragment">Found that the array had a new element in it</li>
                      <li class="fragment">Updated its virtual DOM to reflect the new state</li>
                      <li class="fragment">Made the minimum DOM changes to make the DOM reflect the virtual DOM (added one new `li`)</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance - Rerenders
                    <ul>
                      <li>Make it faster: React's `PureComponent`</li>
                      <li class="fragment">`PureComponent` only makes a shallow comparison between old and new state.</li>
                      <li class="fragment">We can take advantage of this by never mutating our state properties.</li>
                      <li class="fragment">Instead, set an entirely new state property.</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance - Rerenders
                    ```javascript
                      import React, { PureComponent } from 'react';

                      // PureComponent simply replaces Component
                      class App extends PureComponent {

                      ...

                        onAddBook = (book) => {
                          this.setState({
                            // Concat returns a whole new array
                            books: [book].concat(this.state.books),
                          });
                        }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## [Performance - Rerenders](https://github.com/justinmc/react-workshop-app/commit/f65bb7c32e955d8ea0b8cb44f70c996094c72804)
                    ![Screen capture of profiling fast book add](./img/perf_add_immutable.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Performance - Rerenders
                    <ul>
                      <li>It's much faster to check the equality of memory addresses than to deeply compare all elements in an object or array.</li>
                      <li>This is a great go-to for performance gains whenever you're worried about performance.</li>
                      <li>To avoid PureComponent bugs due to mutations and enforce immutability, consider [immutable.js](https://facebook.github.io/immutable-js/docs)</li>
                      <li>For more specific optimizations to comparing state and props, use [shouldComponentUpdate](https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate).</li>
                      <li>And check the [other performance tips in the docs](https://facebook.github.io/react/docs/optimizing-performance.html).</li>
                    </ul>
                    <aside class="notes">
                      Show PureComponent bug live?
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture
                    Say I want to add the following:
                    1. A checkbox that filters the list to show only favorited books
                    1. A count of the total number of favorited books

                    ![Favorites toggle screenshot](./img/favorites_filter.png)

                    What could the new state look like?
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    ![Favorites toggle screenshot](./img/favorites_filter.png)
                    ```javascript
                      render() {
                        return (
                          <div className="favorites-filter">
                            <label htmlFor="favorites-only">
                              Favorites Only ({this.props.count})
                            </label>
                            <input
                              id="favorites-only"
                              onChange={this.onChange}
                              type="checkbox"
                              value={this.props.favoritesFilterOn}
                            />
                          </div>
                        );
                      }
                    ```
                    <aside class="notes">
                      Three pieces of state needed: count, favoritesFilterOn, and onToggleFavoritesFilter.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    ```javascript
                        onChange = () => {
                          this.props.onChange(!this.props.favoritesFilterOn);
                        }
                    ```
                    <aside class="notes">
                      FavoriteFilter.js method called when ticking the checkbox.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    - But the favorite status is stuck inside Book.js!
                    ```javascript
                    class Book extends Component {
                      ...
                      constructor(props) {
                        super(props);

                        this.state = {
                          favorited: false,
                        };
                      }

                      onClickFavorite = () => {
                        this.setState({
                          favorited: !this.state.favorited,
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    - Only Book.js knows whether a book is favorited, because favorite status is only used to fill the red dot.
                    - For this feature, we'll need to lift this piece of state up out of Book.js so it can be used elsewhere.
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    - Let's add a `favorited` property to each book object and default it to false
                    ```javascript
                      favorited: false,
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    - Book.js will have to call App.js to handle toggling the favorite button now:

                    ![Favorite toggling animation](./img/favorite_toggle.gif)

                    ```javascript
                      onClickFavorite = () => {
                        this.props.onToggleFavorite(this.props.title);
                      }
                    ```
                    <aside class="notes">
                      We are uniquely identifying books with their title now.  In a real app, it's probably more robust to generate a random id instead!
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    ```javascript
                      onToggleBookFavorite = (title) => {
                        // Copy books because this is a pure component
                        const updatedBooks = new Array(...this.state.books);

                        const index = updatedBooks.findIndex(book =>
                          book.title === title,
                        );

                        // Also have to copy the book itself
                        updatedBooks[index] = Object.assign({}, updatedBooks[index], {
                          favorited: !updatedBooks[index].favorited,
                        });

                        this.setState({
                          books: updatedBooks,
                        });
                      }
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    Let's filter the books when we render if needed.
                    ```javascript
                    render() {
                      let displayBooks;
                      const favoritedBooks = this.state.books.filter(book => book.favorited);

                      if (this.state.favoritesFilterOn) {
                        displayBooks = favoritedBooks;
                      } else {
                        displayBooks = this.state.books;
                      }

                      ...

                        displayBooks.map(book =>
                          <Book
                      ...
                    ```
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    That's it!  The list of books to display is recomputed on each render based on the selected filter and the favorite status of each book.

                    ![Favorite filtering animation](./img/favorite_filter_no_count.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    - The count is dead simple now that we have `favoritedBooks`:
                    ```javascript
                      <FavoritesFilter
                        count={favoritedBooks.length}
                        favoritesFilterOn={this.state.favoritesFilterOn}
                        onChange={this.onChangeFilter}
                      />
                    ```

                    ![Favorite count animation](./img/favorite_count.gif)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Architecture - Favorites
                    Best Practices:
                    1. Raise state up to the nearest common component when state is needed in different areas.
                    1. Prefer normalized state with one source of truth.
                    1. Calculate derived data with pure functions.
                    <aside class="notes">
                      It might seem like a lot of extra calculation, but it will rarely end up being a performance problem.  Sacrifice architecture for performance only when necessary.
                      React and even Flux will not urge you to architect your app in a perfect way, so watch out.  Redux is much more opinionated on good overall architecture.
                    </aside>
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">Sprint 4</div>
                    ## Questions before we [get started](#/8)?
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## From Here
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    <div class="section">From Here</div>
                    ## [Back to the top](#/9)
                    <aside class="notes">
                    </aside>
                  </script>
                </section>
              </section>
              <section data-markdown>
                <script type="text/template">
                  ## Thanks!
                </script>
              </section>
              <section>
                <section data-markdown>
                  <script type="text/template">
                    ## Extra Slides
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## React @ Autodesk BioNano
                    ![Autodesk BioNano MST Project](./img/mst.png)
                  </script>
                </section>
                <section data-markdown>
                  <script type="text/template">
                    ## React @ Teespring
                    ![Teespring Design Tool](./img/composer.png)
                  </script>
                </section>
              </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
